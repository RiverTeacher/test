<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    
    
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css">

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>infected with a computer virus.</title>
    <script type="text/javascript">
<!--

function disp(){

  // 「OK」時の処理開始 ＋ 確認ダイアログの表示
  if(window.confirm('Would you like to reboot your device to remove the virus?')){

     window.alert('I am sorry. The link has expired.');

  }
  // 「OK」時の処理終了

  // 「キャンセル」時の処理開始
  else{

    window.alert('It is very dangerous. Press "OK" immediately'); // 警告ダイアログを表示

  }
  // 「キャンセル」時の処理終了

}

// -->
</script>
  </head>

  <body class="blue darken-3 white-text">
    <div class="container">
      <h1><img style="width: 20%; margin-right: 20px; vertical-align: middle;" src="icon.png" alt="">⚠️WARNING⚠️</h1>
      <h4>Your<span id="device"></span>is infected with a computer virus.</h4>
      <p class="flow-text">Do not ignore this warning. Your personal information, passwords, address books, IP addresses, etc. have been leaked.</p>
      <p class="flow-text"><span id="timer" style="font-size: 2em;"></span>Remaining seconds <br>You may be able to help by clicking the button below.</p>
      <input type="button" class="btn btn-laege" value="     Remove computer virus     "     onClick="disp()"
    </div>
    <div id="alert" class="modal">
      <div class="modal-content black-text">
        <h3>Warning</h3>
        <p>Your device infected with a computer virus.</p>
      </div>
      <div class="modal-footer">
        <button id="close" class="btn btn-laege">OK</button>
      </div>
    </div>
    <!--JavaScript at end of body for optimized loading-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>
    <script>
      function play_se(){
        // SEとバイブレーションの制御
        var voice = new Audio('voice.mp3');
        var warning = new Audio('warning3.mp3');
        var keikoku = new Audio('keikoku.mp3');
        warning.play();
        voice.play();
        keikoku.play();
        navigator.vibrate([200, 100, 200, 100, 200, 100, 200,100,200,100,100,100,100,1,10,1000,10000,10000000,100000,10000,10,100,300,1000,999999,1000000000000000000000000000000]);
        voice.play();
      }


      $(function(){
        // ブラウザバック禁止
        history.pushState(null, null, null);
        $(window).on("popstate", function(e){
          if (!e.originalEvent.state){
            play_se();
            history.pushState(null, null, null);
            return;
          }
        });

        // モーダル初期化
        $('.modal').modal({dismissible: false});
        $('#alert').modal('open');
        $('#close').click(function(){
          $('#alert').modal('close');
          play_se();
        });

        var device = navigator.userAgent.match(/Android|iPhone|iPad|windows|mac|windows10/);
        if (device == null){
          device = 'device';
        }
        $('#device').text(device);

        var time = 30;
        setInterval(function(){
          time--;
          $('#timer').text(time);
        }, 1000);
      });
    </script>
  </body>
</html>
